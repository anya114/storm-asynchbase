<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sun Aug 31 21:14:23 CEST 2014 -->
<title>AsyncHBaseBolt</title>
<meta name="date" content="2014-08-31">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AsyncHBaseBolt";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../storm/asynchbase/bolt/ExtractKeyValuesBolt.html" title="class in storm.asynchbase.bolt"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?storm/asynchbase/bolt/AsyncHBaseBolt.html" target="_top">Frames</a></li>
<li><a href="AsyncHBaseBolt.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">storm.asynchbase.bolt</div>
<h2 title="Class AsyncHBaseBolt" class="title">Class AsyncHBaseBolt</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>storm.asynchbase.bolt.AsyncHBaseBolt</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>backtype.storm.task.IBolt, backtype.storm.topology.IComponent, backtype.storm.topology.IRichBolt, java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">AsyncHBaseBolt</span>
extends java.lang.Object
implements backtype.storm.topology.IRichBolt</pre>
<div class="block"><p>
 This bold execute one or more HBase RPC using the AsyncHBase client<br/>
 </p>
 <p>
 You have to provide some AsyncHBase fields mappers to map tuple fields
 to HBase RPC requests.
 </p>
 <p>
 By default the bolt is asynchronous ie: the tuples are acked or failed in
 the Callback when the result is available. So the thread won't block waiting
 for the response. But callback may be executed by another thread and unfortunately
 the OuputCollector object is no longer thread safe, so the calls to ack/fail/emit
 are synchronized. It should be ok as long as you have one tasks per executor
 thread ( this is the default behaviour of storm ).<br/>
 You may make the bolt synchronous by calling setAsync(false) but of course it's
 killing performance.<br/>
 Note : Even in synchronous mode multiple RPCs will run in a parallel.
 </p>
 <p>
 Throttling :<br/>
 If HBase can't keep with the stream speed you should get some
 "There are now N RPCs pending due to NSRE on..." in the logs and the AsyncHBase
 client will trigger a PleaseThrottleException when reaching 10k pending requests
 on a specific region. This appends especially when HBase is splitting regions.<br/>
 This bolt will try to throttle stream speed by turning some execute calls to
 synchronous mode and sleeping a little.<br/>
 Please verify that your spout ack tuples and use conf.setMaxSpoutPending
 to control stream speed.
 Tuple failed due to PleaseThrottleExecption have to be replayed by the spout if
 needed.<br/>
 Note: the throttle code comes from net.opentsdb.tools.TextImporter
 </p>
 <p>
 Results :<br/>
 This bolt will emit a tuple containing the RPCs results in the same order the
 mapper returned the RPCs.<br/>
 AsyncHBaseMapper return the requests in the same order you added fieldMappers
 </p>
 <p>
 Look at storm.asynchbase.example.topology.AsyncHBaseBoltExampleTopology for a
 concrete use case.
 </p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../serialized-form.html#storm.asynchbase.bolt.AsyncHBaseBolt">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.slf4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#log">log</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#AsyncHBaseBolt(java.lang.String, storm.asynchbase.bolt.mapper.IAsyncHBaseMapper)">AsyncHBaseBolt</a></strong>(java.lang.String&nbsp;cluster,
              <a href="../../../storm/asynchbase/bolt/mapper/IAsyncHBaseMapper.html" title="interface in storm.asynchbase.bolt.mapper">IAsyncHBaseMapper</a>&nbsp;mapper)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#cleanup()">cleanup</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#declareOutputFields(backtype.storm.topology.OutputFieldsDeclarer)">declareOutputFields</a></strong>(backtype.storm.topology.OutputFieldsDeclarer&nbsp;outputFieldsDeclarer)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#execute(backtype.storm.tuple.Tuple)">execute</a></strong>(backtype.storm.tuple.Tuple&nbsp;tuple)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#getComponentConfiguration()">getComponentConfiguration</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#prepare(java.util.Map, backtype.storm.task.TopologyContext, backtype.storm.task.OutputCollector)">prepare</a></strong>(java.util.Map&nbsp;conf,
       backtype.storm.task.TopologyContext&nbsp;context,
       backtype.storm.task.OutputCollector&nbsp;collector)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html" title="class in storm.asynchbase.bolt">AsyncHBaseBolt</a></code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#setAsync(boolean)">setAsync</a></strong>(boolean&nbsp;async)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html" title="class in storm.asynchbase.bolt">AsyncHBaseBolt</a></code></td>
<td class="colLast"><code><strong><a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html#setTimeout(long)">setTimeout</a></strong>(long&nbsp;timeout)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>public static final&nbsp;org.slf4j.Logger log</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AsyncHBaseBolt(java.lang.String, storm.asynchbase.bolt.mapper.IAsyncHBaseMapper)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AsyncHBaseBolt</h4>
<pre>public&nbsp;AsyncHBaseBolt(java.lang.String&nbsp;cluster,
              <a href="../../../storm/asynchbase/bolt/mapper/IAsyncHBaseMapper.html" title="interface in storm.asynchbase.bolt.mapper">IAsyncHBaseMapper</a>&nbsp;mapper)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cluster</code> - Cluster name to get the right AsyncHBase client.</dd><dd><code>mapper</code> - Mapper containing all RPC configuration.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setAsync(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAsync</h4>
<pre>public&nbsp;<a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html" title="class in storm.asynchbase.bolt">AsyncHBaseBolt</a>&nbsp;setAsync(boolean&nbsp;async)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>async</code> - set synchronous/asynchronous mode</dd>
<dt><span class="strong">Returns:</span></dt><dd>This so you can do method chaining.</dd></dl>
</li>
</ul>
<a name="setTimeout(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTimeout</h4>
<pre>public&nbsp;<a href="../../../storm/asynchbase/bolt/AsyncHBaseBolt.html" title="class in storm.asynchbase.bolt">AsyncHBaseBolt</a>&nbsp;setTimeout(long&nbsp;timeout)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - how long to wait for results in synchronous mode
                (in millisecond).</dd>
<dt><span class="strong">Returns:</span></dt><dd>This so you can do method chaining.</dd></dl>
</li>
</ul>
<a name="prepare(java.util.Map, backtype.storm.task.TopologyContext, backtype.storm.task.OutputCollector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare</h4>
<pre>public&nbsp;void&nbsp;prepare(java.util.Map&nbsp;conf,
           backtype.storm.task.TopologyContext&nbsp;context,
           backtype.storm.task.OutputCollector&nbsp;collector)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>prepare</code>&nbsp;in interface&nbsp;<code>backtype.storm.task.IBolt</code></dd>
</dl>
</li>
</ul>
<a name="execute(backtype.storm.tuple.Tuple)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre>public&nbsp;void&nbsp;execute(backtype.storm.tuple.Tuple&nbsp;tuple)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>execute</code>&nbsp;in interface&nbsp;<code>backtype.storm.task.IBolt</code></dd>
</dl>
</li>
</ul>
<a name="cleanup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanup</h4>
<pre>public&nbsp;void&nbsp;cleanup()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>cleanup</code>&nbsp;in interface&nbsp;<code>backtype.storm.task.IBolt</code></dd>
</dl>
</li>
</ul>
<a name="declareOutputFields(backtype.storm.topology.OutputFieldsDeclarer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>declareOutputFields</h4>
<pre>public&nbsp;void&nbsp;declareOutputFields(backtype.storm.topology.OutputFieldsDeclarer&nbsp;outputFieldsDeclarer)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>declareOutputFields</code>&nbsp;in interface&nbsp;<code>backtype.storm.topology.IComponent</code></dd>
</dl>
</li>
</ul>
<a name="getComponentConfiguration()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getComponentConfiguration</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;getComponentConfiguration()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>getComponentConfiguration</code>&nbsp;in interface&nbsp;<code>backtype.storm.topology.IComponent</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../storm/asynchbase/bolt/ExtractKeyValuesBolt.html" title="class in storm.asynchbase.bolt"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?storm/asynchbase/bolt/AsyncHBaseBolt.html" target="_top">Frames</a></li>
<li><a href="AsyncHBaseBolt.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
